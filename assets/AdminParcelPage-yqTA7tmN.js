import{r as a,j as e}from"./index-Bn6zt9jp.js";import{F as j,k as x,j as m,b as l,l as p,d as f}from"./Footer-DEbuUpIN.js";import{N as g}from"./Navbar-BpH-yYtP.js";function N(){const[r,c]=a.useState([]),[d,n]=a.useState(!0);a.useEffect(()=>{(async()=>{n(!0);try{const h=(await x(m(l,"parcels"))).docs.map(i=>({id:i.id,...i.data()}));c(h)}catch(s){console.error("Error fetching parcels:",s)}finally{n(!1)}})()},[]);const o=async t=>{if(window.confirm("คุณต้องการลบข้อมูลนี้หรือไม่?"))try{await p(f(l,"parcels",t)),c(r.filter(s=>s.id!==t)),alert("ลบข้อมูลสำเร็จ")}catch(s){console.error("Error deleting parcel:",s),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}};return e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsxs("div",{className:"admin-parcel-page",children:[e.jsx("h2",{children:"ลบประวัติรับพัสดุ"}),d?e.jsx("p",{children:"กำลังโหลดข้อมูล..."}):r.length===0?e.jsx("p",{children:"ไม่มีข้อมูลพัสดุที่บันทึกไว้"}):e.jsxs("table",{className:"parcel-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ผู้รับ"}),e.jsx("th",{children:"เลขพัสดุ"}),e.jsx("th",{children:"ประเภทพัสดุ"}),e.jsx("th",{children:"รูปภาพ"}),e.jsx("th",{children:"วันที่ส่ง"}),e.jsx("th",{children:"ลบข้อมูล"})]})}),e.jsx("tbody",{children:r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.recipient}),e.jsx("td",{children:t.trackingNumber}),e.jsx("td",{children:t.parcelType.join(", ")}),e.jsx("td",{children:e.jsx("img",{src:t.imageUrl,alt:"รูปพัสดุ",className:"parcel-image"})}),e.jsx("td",{children:new Date(t.timestamp.seconds*1e3).toLocaleString()}),e.jsx("td",{children:e.jsx("button",{onClick:()=>o(t.id),className:"delete-button",children:"ลบ"})})]},t.id))})]})]}),e.jsx(j,{})]})}export{N as default};
