import{r as t,j as e}from"./index-BqNLipnN.js";import{F as y,r as N,f as k,u as w,h as C,i as I,j as D,b as E}from"./Footer-CUDOszG6.js";import{N as R,S as T}from"./Navbar-C_v5NdDS.js";import{s as u}from"./index-Cx5iUZx4.js";function L(){const[i,d]=t.useState(""),[n,m]=t.useState(""),[r,l]=t.useState([]),[c,g]=t.useState(null),[h,x]=t.useState(!1),[p,f]=t.useState(!1),j=a=>{const{value:s,checked:o}=a.target;l(o?[...r,s]:r.filter(S=>S!==s))},b=async a=>{if(a.preventDefault(),!i||!n||r.length===0||!c){u.info("กรุณากรอกข้อมูลให้ครบถ้วน");return}x(!0),f(!0);try{const s=N(k,`parcels/${c.name}`);await w(s,c);const o=await C(s);await I(D(E,"parcels"),{recipient:i,trackingNumber:n,parcelType:r,imageUrl:o,timestamp:new Date}),u.success("บันทึกข้อมูลสำเร็จ"),d(""),m(""),l([]),g(null),document.getElementById("imageInput").value=""}catch(s){console.error("Error saving parcel data:",s),u.error("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}finally{x(!1),f(!1)}},v=a=>{a.target.files&&a.target.files[0]&&g(a.target.files[0])};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx("h3",{children:"เพิ่มพัสดุ"}),p&&e.jsx("div",{className:"loading-container",children:e.jsx(T,{size:"large"})}),e.jsxs("form",{onSubmit:b,className:"parcel-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"ผู้รับ :"}),e.jsx("input",{type:"text",value:i,onChange:a=>d(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"เลขพัสดุ :"}),e.jsx("input",{type:"text",value:n,onChange:a=>m(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"ประเภทพัสดุ:"}),e.jsx("div",{className:"checkbox-group",children:["กล่องเล็ก","กล่องกลาง","กล่องใหญ่","ซองเล็ก","ซองกลาง","ซองใหญ่","ห่อเล็ก","ห่อกลาง","ห่อใหญ่","อื่นๆ"].map(a=>e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",value:a,checked:r.includes(a),onChange:j}),e.jsx("i",{className:`fas fa-${a.includes("กล่อง")?"box":a.includes("ซอง")?"envelope":"gift"} fa-fw`})," ",a]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"รูปภาพพัสดุ:"}),e.jsx("input",{id:"imageInput",type:"file",onChange:v,required:!0})]}),e.jsx("button",{type:"submit",disabled:h,children:h?"กำลังบันทึก...":"บันทึก"})]}),e.jsx(y,{})]})}export{L as default};
