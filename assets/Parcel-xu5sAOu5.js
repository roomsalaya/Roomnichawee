import{p as t,q as e,N as y,S as N,F as k,y as u,M as w,O as C,P as I,Q as T,T as q,t as D,v as E}from"./index-D6uzPFSQ.js";function R(){const[l,d]=t.useState(""),[r,g]=t.useState(""),[n,i]=t.useState([]),[c,h]=t.useState(null),[x,m]=t.useState(!1),[f,p]=t.useState(!1),j=a=>{const{value:s,checked:o}=a.target;i(o?[...n,s]:n.filter(S=>S!==s))},b=async a=>{if(a.preventDefault(),!l||!r||n.length===0||!c){u.info("กรุณากรอกข้อมูลให้ครบถ้วน");return}m(!0),p(!0);try{const s=w(C,`parcels/${c.name}`);await I(s,c);const o=await T(s);await q(D(E,"parcels"),{recipient:l,trackingNumber:r,parcelType:n,imageUrl:o,timestamp:new Date}),u.success("บันทึกข้อมูลสำเร็จ"),d(""),g(""),i([]),h(null),document.getElementById("imageInput").value=""}catch(s){console.error("Error saving parcel data:",s),u.error("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}finally{m(!1),p(!1)}},v=a=>{a.target.files&&a.target.files[0]&&h(a.target.files[0])};return e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx("h3",{children:"เพิ่มพัสดุ"}),f&&e.jsx("div",{className:"loading-container",children:e.jsx(N,{size:"large"})}),e.jsxs("form",{onSubmit:b,className:"parcel-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"ผู้รับ :"}),e.jsx("input",{type:"text",value:l,onChange:a=>d(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"เลขพัสดุ :"}),e.jsx("input",{type:"text",value:r,onChange:a=>g(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"ประเภทพัสดุ:"}),e.jsx("div",{className:"checkbox-group",children:["กล่องเล็ก","กล่องกลาง","กล่องใหญ่","ซองเล็ก","ซองกลาง","ซองใหญ่","ห่อเล็ก","ห่อกลาง","ห่อใหญ่","อื่นๆ"].map(a=>e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",value:a,checked:n.includes(a),onChange:j}),e.jsx("i",{className:`fas fa-${a.includes("กล่อง")?"box":a.includes("ซอง")?"envelope":"gift"} fa-fw`})," ",a]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"รูปภาพพัสดุ:"}),e.jsx("input",{id:"imageInput",type:"file",onChange:v,required:!0})]}),e.jsx("button",{type:"submit",disabled:x,children:x?"กำลังบันทึก...":"บันทึก"})]}),e.jsx(k,{})]})}export{R as default};
