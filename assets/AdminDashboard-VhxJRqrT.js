import{r as o,j as e}from"./index-CZo4XsUW.js";import{c as b,e as E,R as F,C as l,F as N,j as R,k as I}from"./Footer-BAcQt4i0.js";import{N as D,S as P,L as j}from"./Navbar-BTIGLGfH.js";import{C as d}from"./index-BSI3-ivC.js";import{P as A}from"./progress-DyMJl6V_.js";import{I as Q}from"./index-B7m_4dvp.js";import{s as k}from"./index-M6i4gvCi.js";import"./EyeOutlined-D9cS-oyN.js";const O=()=>{const[h,f]=o.useState(0),[g,u]=o.useState(!1),[m,C]=o.useState([]),[S,n]=o.useState([]),[L,U]=o.useState(""),v=b(),p=E(),a=v.currentUser;o.useEffect(()=>{a!=null&&a.uid&&(async()=>{u(!0);try{const s=R(p,"users"),c=await I(s),t=[];c.forEach(x=>{const i=x.data();t.push({id:x.id,name:i.name||"ไม่ทราบชื่อ",phone:i.phone||"ไม่ระบุเบอร์โทร",room:i.room||"ไม่ระบุห้อง"})}),C(t),n(t),f(t.length)}catch(s){console.error("Error fetching user data:",s),k.error("เกิดข้อผิดพลาดในการดึงข้อมูล")}finally{u(!1)}})()},[a,p]);const w=r=>{const s=r.target.value.trim();if(U(s),s){const c=m.filter(t=>t.phone.toLowerCase().includes(s.toLowerCase())||t.room.toLowerCase().includes(s.toLowerCase()));n(c)}else n(m)},y=h/100*100;return e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs("div",{className:"dashboard-container",children:[e.jsx("h2",{children:"แดชบอร์ด"}),g?e.jsx("div",{className:"loading-container",children:e.jsx(P,{size:"large"})}):e.jsxs(F,{gutter:[8,8],children:[e.jsx(l,{span:12,children:e.jsx(d,{title:"ห้อง",children:e.jsx(A,{percent:y,format:()=>`${h} ห้อง`,status:"active"})})}),e.jsx(l,{span:12,children:e.jsxs(d,{title:"ห้องว่าง",children:[e.jsx("p",{children:"เดือน มีนาคม (15/3/68) ราคา 3,800 บาท ⚡ ว่าง 1 ห้อง"}),e.jsx("p",{children:"เดือน พฤษภาคม ราคา 3,800 บาท ⚡ ว่าง 1 ห้อง"}),e.jsx("p",{children:"เดือน พฤษภาคม ราคา 2,800 บาท ⚡ ว่าง 1 ห้อง"})]})}),e.jsx(l,{span:24,children:e.jsxs(d,{title:"ผลการค้นหา",children:[e.jsx(Q,{placeholder:"ค้นหาเบอร์โทรหรือห้อง",value:L,onChange:w,className:"search-input"}),e.jsx(j,{bordered:!0,dataSource:S,renderItem:r=>e.jsxs(j.Item,{children:[r.name," - ",r.phone," - ห้อง: ",r.room]})})]})})]})]}),e.jsx(N,{})]})};export{O as default};
