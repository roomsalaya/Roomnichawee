import{r as a,j as e}from"./index-Bn6zt9jp.js";import{F as f,k as g,j as M,b as S}from"./Footer-DEbuUpIN.js";import{N as y,S as b,L as n,M as v}from"./Navbar-BpH-yYtP.js";import{s as L}from"./index-C3RKpSz1.js";const D=()=>{const[d,m]=a.useState([]),[p,i]=a.useState(!0),[h,r]=a.useState(!1),[s,o]=a.useState(null);a.useEffect(()=>{(async()=>{i(!0);try{const j=(await g(M(S,"maintenanceReports"))).docs.map(l=>({id:l.id,...l.data()}));m(j)}catch(c){console.error("Error fetching maintenance reports:",c),L.error("เกิดข้อผิดพลาดในการดึงข้อมูล")}finally{i(!1)}})()},[]);const x=t=>{o(t),r(!0)},u=()=>{r(!1),o(null)};return e.jsxs("div",{className:"maintenance-list-wrapper",children:[e.jsx(y,{}),e.jsxs("div",{className:"maintenance-list-container",children:[e.jsx("h3",{children:"รายการแจ้งซ่อมแซม"}),p?e.jsx("div",{className:"loading-container",children:e.jsx(b,{size:"large"})}):e.jsx(n,{itemLayout:"vertical",size:"large",dataSource:d,renderItem:t=>e.jsxs(n.Item,{onClick:()=>x(t),style:{cursor:"pointer"},children:[e.jsx(n.Item.Meta,{title:`สถานที่: ${t.location}`}),e.jsx("p",{children:`รายละเอียด: ${t.issueDescription}`})]},t.id)})]}),e.jsx(v,{title:`รายละเอียดการแจ้งซ่อม: ${s==null?void 0:s.location}`,visible:h,onCancel:u,footer:null,children:s&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:`รายละเอียด: ${s.issueDescription}`}),s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:"ปัญหา",style:{maxWidth:"100%",maxHeight:"300px"}}),e.jsx("p",{children:`วันที่แจ้ง: ${new Date(s.timestamp.seconds*1e3).toLocaleString()}`}),e.jsx("p",{children:`สถานะ: ${s.status||"ยังไม่ได้ระบุ"}`})]})}),e.jsx(f,{})]})};export{D as default};
