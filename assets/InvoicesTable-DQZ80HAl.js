import{p as r,M as S,q as e,N as g,S as p,aD as j,F as b,t as k,s as Y}from"./index-D0hLmu_5.js";const F=()=>{const[c,h]=r.useState([]),[m,o]=r.useState([]),[x,l]=r.useState(!0),[y,f]=r.useState(""),d=S();r.useEffect(()=>{(async()=>{l(!0);try{const t=k(d,"invoices"),n=(await Y(t)).docs.map(i=>{const a=i.data();return{id:i.id,userId:a.userId||"",room:a.room||"",month:a.month||"",year:a.year||"",rent:a.rent||0,water:a.water||0,electricity:a.electricity||0,fine:a.fine||0,total:a.total||0,roomStatus:a.roomStatus||""}});h(n),o(n)}catch(t){console.error("Error fetching invoices: ",t)}finally{l(!1)}})()},[d]);const v=s=>{const t=s.target.value;if(f(t),t){const u=c.filter(n=>(parseInt(n.year)+543).toString()===t);o(u)}else o(c)},I=[{title:"ห้อง",dataIndex:"room",key:"room"},{title:"เดือน",dataIndex:"month",key:"month"},{title:"ปี (พ.ศ.)",dataIndex:"year",key:"year",render:s=>(parseInt(s)+543).toString()},{title:"ค่าเช่า",dataIndex:"rent",key:"rent"},{title:"ค่าน้ำ",dataIndex:"water",key:"water"},{title:"ค่าไฟ",dataIndex:"electricity",key:"electricity"},{title:"ค่าปรับ",dataIndex:"fine",key:"fine"},{title:"รวมทั้งหมด",dataIndex:"total",key:"total"},{title:"สถานะการชำระเงิน",dataIndex:"roomStatus",key:"roomStatus"}];return e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsxs("div",{className:"invoices-table-container",children:[e.jsx("h3",{children:"ใบแจ้งหนี้"}),e.jsxs("div",{className:"filter-container",children:[e.jsx("label",{htmlFor:"year-select",children:"เลือกปี:"}),e.jsxs("select",{id:"year-select",className:"form-select","aria-label":"เลือกปี",value:y,onChange:v,children:[e.jsx("option",{value:"",children:"ทั้งหมด"}),Array.from({length:10},(s,t)=>2567+t).map(s=>e.jsx("option",{value:s.toString(),children:s},s))]})]}),x?e.jsx(p,{size:"large"}):e.jsx(j,{dataSource:m,columns:I,rowKey:"userId",pagination:{pageSize:10}})]}),e.jsx(b,{})]})};export{F as default};
