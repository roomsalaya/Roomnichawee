import{p as a,q as e,N as f,S as g,Z as n,Y as S,F as M,s as y,t as v,v as R,y as $}from"./index-DvTBtECc.js";const w=()=>{const[d,h]=a.useState([]),[p,i]=a.useState(!0),[x,r]=a.useState(!1),[s,o]=a.useState(null);a.useEffect(()=>{(async()=>{i(!0);try{const j=(await y(v(R,"maintenanceReports"))).docs.map(l=>({id:l.id,...l.data()}));h(j)}catch(c){console.error("Error fetching maintenance reports:",c),$.error("เกิดข้อผิดพลาดในการดึงข้อมูล")}finally{i(!1)}})()},[]);const m=t=>{o(t),r(!0)},u=()=>{r(!1),o(null)};return e.jsxs("div",{className:"maintenance-list-wrapper",children:[e.jsx(f,{}),e.jsxs("div",{className:"maintenance-list-container",children:[e.jsx("h3",{children:"รายการแจ้งซ่อมแซม"}),p?e.jsx("div",{className:"loading-container",children:e.jsx(g,{size:"large"})}):e.jsx(n,{itemLayout:"vertical",size:"large",dataSource:d,renderItem:t=>e.jsxs(n.Item,{onClick:()=>m(t),style:{cursor:"pointer"},children:[e.jsx(n.Item.Meta,{title:`สถานที่: ${t.location}`}),e.jsx("p",{children:`รายละเอียด: ${t.issueDescription}`})]},t.id)})]}),e.jsx(S,{title:`รายละเอียดการแจ้งซ่อม: ${s==null?void 0:s.location}`,visible:x,onCancel:u,footer:null,children:s&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:`รายละเอียด: ${s.issueDescription}`}),s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:"ปัญหา",style:{maxWidth:"100%",maxHeight:"300px"}}),e.jsx("p",{children:`วันที่แจ้ง: ${new Date(s.timestamp.seconds*1e3).toLocaleString()}`}),e.jsx("p",{children:`สถานะ: ${s.status||"ยังไม่ได้ระบุ"}`})]})}),e.jsx(M,{})]})};export{w as default};
